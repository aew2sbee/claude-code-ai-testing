# CLAUDE.md

このファイルは、このリポジトリでコードを扱う際のClaude Code (claude.ai/code) 向けのガイダンスを提供します。

## 開発コマンド

### ビルド
- `npm run build` - TypeScriptをJavaScriptにコンパイル（`dist/`に出力）
- `npm run build:watch` - 開発用のウォッチモードでTypeScriptをコンパイル

### テスト
- `npm test` - 全てのJestテストを実行
- `npm run test:watch` - 開発用のウォッチモードでテストを実行
- `npm run test:coverage` - カバレッジレポート付きでテストを実行
- 特定のテストファイルを実行: `npm test -- fibonacci.test.ts`
- パターンマッチングでテストを実行: `npm test -- --testNamePattern="fibonacci"`

## プロジェクトアーキテクチャ

これはフィボナッチ数列の計算に特化したTypeScriptライブラリです。シンプルな単一関数設計を採用しています：

### コア構造
- **ソースコード**: `src/fibonacci.ts` - 効率的な反復的フィボナッチ実装を含む
- **テスト**: `test/fibonacci.test.ts` - fibonacci関数を対象とした包括的なテストスイート（100%カバレッジ達成）
- **ビルド出力**: `dist/` - コンパイルされたJavaScriptと型定義ファイル

### 主要関数
**`fibonacci(n: number): number`** - 反復的実装
- 時間計算量: O(n)
- 空間計算量: O(1)
- 大きな値に対しても安定したパフォーマンス
- 負の数に対する適切なエラーハンドリング

### テスト戦略
- Jest設定は`ts-jest`プリセットとNode.js環境を使用
- テストは`test/`ディレクトリに配置（ソースコードと同じ場所ではない）
- カバレッジ収集は`src/`内の全`.ts`ファイルを対象（`.d.ts`ファイルは除外）
- テスト項目は日本語で記述され、以下をカバー：
  - エラーハンドリング（負の数の入力）
  - 基本ケース（0, 1の入力）
  - 反復的な計算の正確性
  - 大きな値の処理

### TypeScript設定
- ターゲット: ES2020、CommonJSモジュール
- 厳密モードを有効化し、完全な型チェックを実行
- 型定義ファイルとソースマップを出力
- ルートディレクトリは`src/`、出力ディレクトリは`dist/`

### ドキュメント
- 全ての関数に日本語での包括的なJSDocコメントを記載
- JSDocには例、パラメータの説明、戻り値、パフォーマンスの警告を含む
- README.mdに詳細な使用方法とAPIリファレンスを記載

## 開発ノート

### パフォーマンスの考慮事項
- 反復的アプローチにより効率的な実装を実現
- 時間計算量O(n)、空間計算量O(1)で最適化
- 大きな値（n=20以上）に対しても安定したパフォーマンス

### エラーハンドリング
- 入力パラメータの検証を実装
- 負の数に対して適切なエラーメッセージを表示
- エラーメッセージは標準的なJavaScriptエラーとの一貫性のため英語で記載

### コード品質
- 100%のテストカバレッジを達成・維持
- 日本語でのJSDocコメントによる詳細な文書化
- TypeScript厳密モードによる型安全性の確保

### テストアプローチ
新機能を追加する際は：
1. 日本語でのテスト項目名を使用
2. エッジケース、エラー条件、正常動作を網羅する包括的なテストケースを追加
3. 100%カバレッジを維持
4. 日本語JSDocドキュメントを例と共に更新
5. パフォーマンステストが必要な場合は実装