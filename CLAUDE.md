# CLAUDE.md

このファイルは、このリポジトリでコードを扱う際のClaude Code (claude.ai/code) 向けのガイダンスを提供します。

## 開発コマンド

### ビルド
- `npm run build` - TypeScriptをJavaScriptにコンパイル（`dist/`に出力）
- `npm run build:watch` - 開発用のウォッチモードでTypeScriptをコンパイル

### テスト
- `npm test` - 全てのJestテストを実行
- `npm run test:watch` - 開発用のウォッチモードでテストを実行
- `npm run test:coverage` - カバレッジレポート付きでテストを実行
- 特定のテストファイルを実行: `npm test -- fibonacci.test.ts`
- パターンマッチングでテストを実行: `npm test -- --testNamePattern="fibonacci"`

## プロジェクトアーキテクチャ

これはフィボナッチ数列の計算に特化したTypeScriptライブラリです。アーキテクチャは単純です：

### コア構造
- **ソースコード**: `src/fibonacci.ts` - フィボナッチ数列を計算するメイン関数を含む
- **テスト**: `test/fibonacci.test.ts` - fibonacci関数を対象とした包括的なテストスイート
- **ビルド出力**: `dist/` - コンパイルされたJavaScriptと型定義ファイル

### 主要関数
1. **`fibonacci(n)`** - 反復的実装（時間計算量O(n)、空間計算量O(1)）- 本番利用推奨

### テスト戦略
- Jest設定は`ts-jest`プリセットとNode.js環境を使用
- テストは`test/`ディレクトリに配置（ソースコードと同じ場所ではない）
- カバレッジ収集は`src/`内の全`.ts`ファイルを対象（`.d.ts`ファイルは除外）
- テスト構造はdescribe/testパターンに従い、ネストしたdescribeブロックで整理

### TypeScript設定
- ターゲット: ES2020、CommonJSモジュール
- 厳密モードを有効化し、完全な型チェックを実行
- 型定義ファイルとソースマップを出力
- ルートディレクトリは`src/`、出力ディレクトリは`dist/`

### ドキュメント
- 全ての関数に日本語での包括的なJSDocコメントを記載
- JSDocには例、パラメータの説明、戻り値、パフォーマンスの警告を含む
- README.mdに詳細な使用方法とAPIリファレンスを記載

## 開発ノート

### パフォーマンスの考慮事項
- 現在の実装は反復的アプローチで効率的
- 大きな値に対しても安定したパフォーマンスを提供

### エラーハンドリング
- 全ての関数は入力パラメータを検証し、負の入力に対して分かりやすいエラーを投げる
- エラーメッセージは標準的なJavaScriptエラーとの一貫性のため英語で記載

### テストアプローチ
新機能を追加する際は：
1. エッジケース、エラー条件、正常動作を網羅する包括的なテストケースを追加
2. 該当する場合はパフォーマンス特性をテスト
3. JSDocドキュメントを例と共に更新